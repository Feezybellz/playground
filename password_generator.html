<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

    <!-- <input type="text" id="password" name="" value=""> -->
    <input type="number" id="password_length" name="" value="">

    <button type="button" name="button">Generate</button>
    <script type="text/javascript">

      // function generatePassword(p_length = 36){
      //   let length = 36;
      //
      //   if (p_length.length > 0) {
      //      length = p_length;
      //   }
      //   const regx = new RegExp(/\d/, "g");
      //   const password = window.crypto.getRandomValues(new BigUint64Array(1)).reduce(
      //     (prev, curr, index) => (
      //     !index ? prev : prev.toString(length)
      //     ) + (
      //     index % 2 ? curr.toString(length).toUpperCase().replace(regx, key => ".,:;-_()=*#".charAt(key)) : curr.toString(length)
      //     )
      //   );
      //
      //   return password;
      // }

      function password_generator( len ) {
        let length = (len)?(len):(10);
        if (length.length < 1) {
          length = 10;
        }

        const string = "abcdefghijklmnopqrstuvwxyz"; //to upper
        const numeric = '0123456789';
        const punctuation = '!@#$%^&*()_+~`|}{[]\:;?><,./-=';
        let password = "";
        let character = "";
        let crunch = true;
        while( password.length<length ) {
            entity1 = Math.ceil(string.length * Math.random()*Math.random());
            entity2 = Math.ceil(numeric.length * Math.random()*Math.random());
            entity3 = Math.ceil(punctuation.length * Math.random()*Math.random());
            hold = string.charAt( entity1 );
            hold = (password.length%2==0)?(hold.toUpperCase()):(hold);
            character += hold;
            character += numeric.charAt( entity2 );
            character += punctuation.charAt( entity3 );
            password = character;
        }
        password=password.split('').sort(function(){return 0.5-Math.random()}).join('');
        return password.substr(0,length);
    }

      document.querySelector("button").addEventListener("click", function(){
        const length = document.querySelector("#password_length").value;
        const password = password_generator(length);
        prompt("Here's your generated password",password)
        console.log(password);
      })
    </script>
  </body>
</html>
