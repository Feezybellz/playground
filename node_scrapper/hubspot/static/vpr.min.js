(()=>{var H=Object.defineProperty,w=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var V=(r,a,o)=>a in r?H(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o,R=(r,a)=>{for(var o in a||(a={}))te.call(a,o)&&V(r,o,a[o]);if(x)for(var o of x(a))re.call(a,o)&&V(r,o,a[o]);return r},j=(r,a)=>w(r,ee(a));var ne=(r,a)=>()=>(a||r((a={exports:{}}).exports,a),a.exports);var oe=ne((ie,_)=>{(function(r){var a=r.vpr.a,o=void 0,u=!1;const i="[Veritonic]",J="Veritonic Debug Mode Activated. Check the dev console or the platform for event information.",G="https://ip.veritonicmetrics.com";var d="https://atr.veritonicmetrics.com",f=null,h="vt_dbg_id",C="vt_dbg_sess_id",v="vt_dbg_endpoint",b=h,q=C,S=null,T=!1,D=null,L=[],y=sessionStorage.getItem(b),O=sessionStorage.getItem(q);try{K()}catch(t){T=!0,console.error(i,"IP lookup failed with error",t),k(null)}function k(t){T=!0;for(const e of L)e(t);L=[]}function K(){const t=new XMLHttpRequest;t.open("GET",G,!0),t.send(),t.timeout=2e3,t.onreadystatechange=function(){if(t.readyState===4)if(t.status===200){const e=JSON.parse(t.responseText).v64;D=e,k(e)}else console.error(i,"IP lookup failed with status "+t.status),k(null)},t.ontimeout=function(){console.error(i,"IP lookup timed out."),k(null)}}function E(t){try{const e=new URL(t);e.host.endsWith(".veritonic.com")||e.host.endsWith(".veritonicmetrics.com")?(S=t,sessionStorage.setItem(v,S)):(console.error(i,"Invalid debug endpoint."),sessionStorage.removeItem(v))}catch(e){}}E(sessionStorage.getItem(v));try{const t=new URLSearchParams(r.location.search);if(t.has(h)){y=t.get(h),O=t.get(C),E(t.get(v)),sessionStorage.setItem(b,y),sessionStorage.setItem(q,O);const e=new URL(r.location);e.searchParams.delete(h),e.searchParams.delete(C),e.searchParams.delete(v),r.history.replaceState({},document.title,e),console.log(i,J)}}catch(t){}y&&(u=!0);function X(t){if(y!=null&&u&&S){console.log(i,"sendDebugPacket",t);const e=new XMLHttpRequest;e.open("POST",S,!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(j(R({},t),{debug_id:y,debug_session_id:O}))),e.onreadystatechange=function(){e.readyState===4&&e.status!==200&&(console.log(i,"Debugging endpoint failed with status "+e.status,"disabling debug mode."),u=!1,sessionStorage.removeItem(b))};return}}console.log(i,"Initializing...");function m(t){var e=!0,c=!1,p;function Z(){return{url:t.location.href,userAgent:t.navigator.userAgent||null,platform:t.navigator.platform||null}}function N(n){if(d&&Object.keys(n).length>0){if(!T){L.push(()=>N(n)),u&&console.log(i,"scheduled track after IP lookup",n);return}if(e&&(n.context=p.clientContext),n.ip64=D,c)console.debug(i,"POST "+d,n);else try{var s=new t.XMLHttpRequest;s.open("POST",d,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(n)),u&&console.debug(i,"POST",d,n),s.onreadystatechange=function(){if(s.readyState===4&&(X({type:"tracker",veritonic_id:o,status:s.status,payload:n,response:s.response}),u&&console.debug(i,"POST",d,"status",s.status,"response",s.response),s.status!==200)){console.error(i,"POST",d,"failed with status",s.status);try{var g=JSON.parse(s.response);g&&g.msg&&(g.errors=g.errors||[],console.error(i,g.msg+"\n"+g.errors.join("\n")))}catch(ae){console.error(i,"Error:",s.response)}}}}catch(g){}}}function I(){this.clientContext=Z()}I.prototype={push:function(n){var s=typeof n;s!=="object"&&s!=="string"||(s==="string"?n={text:n}:(n.devMode!==void 0&&(c=!!n.devMode,delete n.devMode),n.attachClientContext!==void 0&&(e=!!n.attachClientContext,delete n.attachClientContext),n.endpoint&&(d=n.endpoint,delete n.endpoint)),N(n))}};var P=t.veritonic_tracker;if(P&&P.length){p=new I;var A=0,$=P.length;for(A=0;A<$;A++)p.push(P[A])}else p=new I;return t.veritonic_tracker=p,t.VTTracker=I,p}var M=typeof _<"u"&&_.exports;if(typeof r<"u"){var l=m(r);M&&(m.default=l,_.exports=l)}else if(M)m.default=m,_.exports=m;else throw new Error("");var U=function(){if(l.push({endpoint:d,attachClientContext:!0}),arguments.length>0)switch(arguments[0]){case"addtocart":B(Array.from(arguments).slice(1));break;case"checkout":W(Array.from(arguments).slice(1));break;case"lead":z(Array.from(arguments).slice(1));break;case"product":F(Array.from(arguments).slice(1));break;case"purchase":Q(Array.from(arguments).slice(1));break;case"debug":u=arguments[1],u||sessionStorage.removeItem(b),console.debug(i,"set debug",u);break;case"veritonic_id":try{o=arguments[1]}catch(e){}break;case"gdpr":try{f=arguments[1]}catch(e){}break;case"endpoint":try{d=arguments[1]}catch(e){}break;default:Y(arguments[0],Array.from(arguments).slice(1));break}};r.vpr&&r.vpr.a&&r.vpr.a.length&&r.vpr.a.forEach(function(t){U.apply(void 0,Array.from(t))}),r.vpr=function(...t){U.apply(void 0,t)};function B(t){let e=Array.from(t)[0],c={event:"addtocart",veritonic_id:o,gdpr:f,type:e.type,category:e.category,value:e.value,currency:e.currency,quantity:e.quantity,product_id:e.product_id,product_name:e.product_name,product_type:e.product_type,product_vendor:e.product_vendor,variant_id:e.variant_id,variant_name:e.variant_name};l.push(c)}function W(t){let e=Array.from(t)[0],c={event:"checkout",veritonic_id:o,gdpr:f,type:e.type,category:e.category,value:e.value,currency:e.currency,discount_code:e.discount_code,quantity:e.quantity,line_items:e.line_items?Array.from(e.line_items):[]};l.push(c)}function z(t){let e=Array.from(t)[0],c={event:"lead",veritonic_id:o,gdpr:f,value:e.value,currency:e.currency,type:e.type,category:e.category};l.push(c)}function F(t){let e=Array.from(t)[0],c={event:"product",veritonic_id:o,gdpr:f,type:e.type,category:e.category,value:e.value,currency:e.currency,product_id:e.product_id,product_name:e.product_name,product_type:e.product_type,product_vendor:e.product_vendor};l.push(c)}function Q(t){let e=Array.from(t)[0],c={event:"purchase",veritonic_id:o,gdpr:f,type:e.type,category:e.category,value:e.value,currency:e.currency,discount_code:e.discount_code,order_id:e.order_id,is_new_customer:e.is_new_customer,quantity:e.quantity,line_items:e.line_items?Array.from(e.line_items):[]};l.push(c)}function Y(t,e){let c=Array.from(e)[0],p=R({event:t,veritonic_id:o},c);l.push(p)}})(window)});oe();})();
/*! Veritonic Attribution (c) 2022-2024 Veritonic, Inc. Portions: simple-tracker | MIT https://github.com/codeniko/simple-tracker !*/
